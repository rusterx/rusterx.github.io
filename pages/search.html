---
layout: page
title: 搜索
icon: search
---

<!-- 引入搜索 -->
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>


<div id="app">
  <input type="text" class="form-control" @keyup.enter="search" v-model="qw" placeholder="搜索" >
  <div v-if="results.length != 0">
    <h2>搜索结果</h2>
    <br/>
    <div class="result-item" v-for="(result, index) in results" :key="index">
      <a :href="result.url" class="result-title">{{ result.name }}</a>
      <h4>{{ result.url }}</h4>
      <p>{{ result.snippet }}</p>
    </div>
  </div>
</div>


<script>
  const { createApp, ref } = Vue
  createApp({
    setup() {
      const qw = ref('');
      const results = ref([]);

      function search(){
        var url = 'https://service-o1wnvkkp-1251110281.sh.tencentapigw.com/release/search/'+encodeURI(qw.value);
        fetch(url).then(res => res.json()).then(json => {
          console.log(json);
          results.value = json['webPages']['value'];
        }).catch(err => {
          console.log(err);
        });
      }

      // 使用setup创建的必须全局返回
      return {
        qw,
        results,
        search
      }
    }
  }).mount('#app')
</script>
